<script>
  const noBtn = document.getElementById("no");
  const yesBtn = document.getElementById("yes");
  const msg = document.getElementById("message");
  const music = document.getElementById("music");
  const buttons = document.querySelector(".buttons");

  const messages = [
    "Are you sure? ğŸ¥º",
    "Heyyy stop ğŸ˜­",
    "My heart ğŸ’”",
    "Nice try ğŸ˜",
    "You canâ€™t escape ğŸ˜ˆ",
    "JUST SAY YES ğŸ˜¤",
    "NO is scared now ğŸ˜µ"
  ];

  let count = 0;
  let yesScale = 1;
  let musicStarted = false;

  /* ğŸ“± VIBRATION */
  function vibrate(pattern) {
    if (navigator.vibrate) navigator.vibrate(pattern);
  }

  /* ğŸ’“ HEARTBEAT synced to YES glow */
  setInterval(() => {
    vibrate([40, 60, 40]);
  }, 1500);

  /* ğŸ§² MAGNETIC PUSH AWAY */
  function repelNo() {
    const yesRect = yesBtn.getBoundingClientRect();
    const noRect = noBtn.getBoundingClientRect();

    const dx = noRect.left - yesRect.left;
    const dy = noRect.top - yesRect.top;
    const distance = Math.sqrt(dx * dx + dy * dy);

    if (distance < 120) {
      moveNoButton();
    }
  }

  function moveNoButton() {
    vibrate([30, 20, 30]);

    const maxX = buttons.clientWidth - noBtn.offsetWidth;
    const maxY = buttons.clientHeight - noBtn.offsetHeight;

    const x = Math.random() * maxX;
    const y = Math.random() * maxY;

    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";

    yesScale += 0.1;
    yesBtn.style.transform = `translateX(-50%) scale(${yesScale})`;

    msg.textContent = messages[count % messages.length];
    count++;
  }

  noBtn.addEventListener("mouseover", moveNoButton);
  noBtn.addEventListener("touchstart", moveNoButton);
  document.addEventListener("mousemove", repelNo);
  document.addEventListener("touchmove", repelNo);

  /* ğŸ† FIREWORKS */
  function launchFireworks() {
    vibrate([100, 50, 100, 50, 200]);

    for (let i = 0; i < 10; i++) {
      const firework = document.createElement("div");
      firework.style.position = "fixed";
      firework.style.left = Math.random() * 100 + "vw";
      firework.style.top = Math.random() * 60 + "vh";
      firework.style.width = "6px";
      firework.style.height = "6px";
      firework.style.borderRadius = "50%";
      firework.style.background = "transparent";
      firework.style.boxShadow = `
        0 -30px #ff4d6d,
        30px 0 #ffd166,
        -30px 0 #06d6a0,
        0 30px #118ab2,
        22px 22px #ef476f,
        -22px -22px #ff9a9e
      `;
      firework.style.animation = "explode 1s ease-out forwards";
      document.body.appendChild(firework);

      setTimeout(() => firework.remove(), 1000);
    }
  }

  /* ğŸ”¥ FIREWORK animation */
  const style = document.createElement("style");
  style.innerHTML = `
    @keyframes explode {
      from { transform: scale(0); opacity: 1; }
      to { transform: scale(1.5); opacity: 0; }
    }
  `;
  document.head.appendChild(style);

  yesBtn.addEventListener("click", () => {
    vibrate([200, 100, 200, 100, 300]);
    music.play();
    launchFireworks();

    setTimeout(() => {
      document.body.innerHTML = `
        <div style="
          height:100vh;
          display:flex;
          flex-direction:column;
          align-items:center;
          justify-content:center;
          text-align:center;
          font-family:'Comic Sans MS', cursive;
          background:linear-gradient(135deg,#ff9a9e,#fad0c4);
        ">
          <h1 style="color:#ff4d6d;">SHE SAID YES ğŸ’ğŸ’–</h1>
          <p style="font-size:22px;">Best Valentine ever ğŸ˜˜</p>
          <p style="font-size:40px;">ğŸ¥°ğŸ†ğŸ’˜</p>
        </div>
      `;
    }, 800);
  });

  document.body.addEventListener("click", () => {
    if (!musicStarted) {
      music.play();
      musicStarted = true;
    }
  });
</script>
